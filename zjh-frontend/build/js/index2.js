import{s as e,r as s,u as r,a as o,j as n,b as t,m as a}from"./index.js";import{A as i}from"./index3.js";import{B as d,M as l}from"./index4.js";import{I as p}from"./index5.js";const x=undefined,m=undefined,c=undefined,u=undefined;var h="_hallWrapper_dhb3j_1",j="_btnGroup_dhb3j_9",f="_roomList_dhb3j_12",v="_item_dhb3j_17";const _=undefined;var y;const b=i((()=>{const[i]=e.useModel("user"),[x,m]=s.exports.useState(!1),[c,u]=s.exports.useState(!1),[_,y]=s.exports.useState([]),[b,I]=s.exports.useState(""),g=r();return s.exports.useEffect((()=>{var e;async function s(){const{data:e}=await t("/api/roomList");y(e)}(null==(e=null==i?void 0:i.userInfo)?void 0:e.username)&&o.emit("enterHall",i.userInfo),s()}),[i.userInfo]),n.exports.jsxs("div",{className:h,children:[n.exports.jsx("h2",{children:"\u5927\u5385"}),n.exports.jsxs("div",{className:j,children:[n.exports.jsx(d,{type:"primary",onClick:()=>m(!0),children:"\u521b\u5efa\u623f\u95f4"}),n.exports.jsx(d,{type:"primary",onClick:()=>{localStorage.removeItem("zjh_token"),g.push("/login")},children:"\u9000\u51fa\u767b\u5f55"})]}),n.exports.jsx("div",{className:f,children:_.length>0?_.map((e=>n.exports.jsxs("div",{className:v,children:[n.exports.jsxs("h4",{children:[n.exports.jsxs("span",{children:["\u623f\u95f4\u540d\uff1a",e.roomName]}),n.exports.jsxs("span",{children:[e.user.length,"/8"]})]}),n.exports.jsxs("p",{children:["\u623f\u95f4\u53f7\uff1a",e.id]}),n.exports.jsx(d,{type:"primary",onClick:async()=>{const{data:s}=await t("/api/roomList");y(s);const r=undefined;s.some((s=>s.id===e.id&&s.start))?a.warn("\u5bf9\u5c40\u8fdb\u884c\u4e2d\uff0c\u4e0d\u80fd\u52a0\u5165"):o.emit("joinRoom",{id:e.id,username:i.userInfo.username})},children:"\u52a0\u5165"})]},e.roomName))):"\u5927\u5385\u6682\u65e0\u623f\u95f4\uff0c\u5feb\u53bb\u521b\u5efa\u4e00\u4e2a\u5427"}),n.exports.jsx(l,{title:"\u521b\u5efa\u623f\u95f4",visible:x,onCancel:()=>m(!1),onOk:async()=>{o.emit("createRoom",i.userInfo),m(!1)},children:n.exports.jsx("p",{children:"\u662f\u5426\u521b\u5efa\u623f\u95f4\uff1f"})}),n.exports.jsx(l,{title:"\u52a0\u5165\u623f\u95f4",visible:c,onCancel:()=>u(!1),onOk:()=>{o.emit("joinRoom",{id:b,username:i.userInfo.username}),u(!1)},children:n.exports.jsx(p,{placeholder:"\u8bf7\u8f93\u5165\u623f\u95f4\u53f7",value:b,onChange:e=>I(e.target.value)})})]})}));export{b as default};
